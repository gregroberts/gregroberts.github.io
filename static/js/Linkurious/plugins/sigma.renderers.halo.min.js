(function(a){"use strict";if("undefined"==typeof sigma)throw new Error("sigma not in scope.");sigma.utils.pkg("sigma.settings");var b={nodeHaloColor:"#fff",nodeHaloStroke:!1,nodeHaloStrokeColor:"#000",nodeHaloStrokeWidth:.5,nodeHaloSize:50,nodeHaloClustering:!1,nodeHaloClusteringMaxRadius:1e3,edgeHaloColor:"#fff",edgeHaloSize:10,drawHalo:!0};sigma.settings=sigma.utils.extend(sigma.settings||{},b)}).call(this),function(a){"use strict";function b(){for(var a=[],b=-1,c=arguments.length;++b<c;){var d=arguments[b];a.push(d)}var e=a[0],f=-1,g=e?e.length:0,h=[];a:for(;++f<g;)if(d=e[f],h.indexOf(d)<0){for(var b=c;--b;)if(a[b].indexOf(d)<0)continue a;h.push(d)}return h}function c(a,b,c){for(var d=0;d<a.length;d++)null!=a[d]&&(b.beginPath(),b.arc(a[d].x,a[d].y,a[d].radius,0,2*Math.PI,!0),b.closePath(),c?b.stroke():b.fill())}function d(a,b,c){if(c=c||Number.POSITIVE_INFINITY,a.length>1)for(var d,e,f,g=!0;g;){g=!1;for(var h=0;h<a.length;h++)if(null!==a[h])for(var i=h+1;i<a.length;i++)if(null!==a[i]&&(e=sigma.utils.getDistance(a[h].x,a[h].y,a[i].x,a[i].y),c>e&&e<a[h].radius+a[i].radius)){g=!0,f=[{x:a[h].x,y:a[h].y,radius:a[h].radius},{x:a[i].x,y:a[i].y,radius:a[i].radius}],a[h].points&&(f=f.concat(a[h].points)),a[i].points&&(f=f.concat(a[i].points)),d={x:0,y:0};for(var j=0;j<f.length;j++)d.x+=f[j].x,d.y+=f[j].y;d.x/=f.length,d.y/=f.length,d.radius=Math.max.apply(null,f.map(function(a){return b+sigma.utils.getDistance(d.x,d.y,a.x,a.y)})),a.push({x:d.x,y:d.y,radius:d.radius,points:f}),a[h]=a[i]=null;break}}return a}function e(a){a=a||{};var e=sigma.utils.getPixelRatio();this.domElements.background||(this.initDOM("canvas","background"),this.domElements.background.width=this.container.offsetWidth*e,this.domElements.background.height=this.container.offsetHeight*e,this.container.insertBefore(this.domElements.background,this.container.firstChild));var f,g,h,i,j,k,l,m,n,o,p=this,q=p.contexts.background,r=this instanceof sigma.renderers.webgl,s=p.options.prefix,t=r?s.substr(5):s,u=a.nodeHaloClustering||p.settings("nodeHaloClustering"),v=a.nodeHaloClusteringMaxRadius||p.settings("nodeHaloClusteringMaxRadius"),w=a.nodeHaloColor||p.settings("nodeHaloColor"),x=a.nodeHaloSize||p.settings("nodeHaloSize"),y=a.nodeHaloStroke||p.settings("nodeHaloStroke"),z=a.nodeHaloStrokeColor||p.settings("nodeHaloStrokeColor"),A=a.nodeHaloStrokeWidth||p.settings("nodeHaloStrokeWidth"),B=p.settings("borderSize")||0,C=p.settings("outerBorderSize")||0,D=a.edgeHaloColor||p.settings("edgeHaloColor"),E=a.edgeHaloSize||p.settings("edgeHaloSize"),F=a.drawHalo||p.settings("drawHalo"),G=a.nodes||[],H=a.edges||[];F&&(G=r?G:b(a.nodes,p.nodesOnScreen),H=r?H:b(a.edges,p.edgesOnScreen),q.clearRect(0,0,q.canvas.width,q.canvas.height),q.save(),q.strokeStyle=D,H.forEach(function(a){f=p.graph.nodes(a.source),g=p.graph.nodes(a.target),q.lineWidth=(a[s+"size"]||1)+E,q.beginPath(),h={},i=f[t+"size"],j=f[t+"x"],k=f[t+"y"],l=g[t+"x"],m=g[t+"y"],q.moveTo(j,k),"curve"===a.type||"curvedArrow"===a.type?a.source===a.target?(h=sigma.utils.getSelfLoopControlPoints(j,k,i),q.bezierCurveTo(h.x1,h.y1,h.x2,h.y2,l,m)):(h=sigma.utils.getQuadraticControlPoint(j,k,l,m),q.quadraticCurveTo(h.x,h.y,l,m)):(q.moveTo(j,k),q.lineTo(l,m)),q.stroke(),q.closePath()}),q.fillStyle=w,y&&(q.lineWidth=A,q.strokeStyle=z),n=B+C+x,o=G.filter(function(a){return!a.hidden}).map(function(a){return{x:a[t+"x"],y:a[t+"y"],radius:a[t+"size"]+n}}),u&&(o=d(o,n,v)),y&&c(o,q,!0),c(o,q),q.restore())}if("undefined"==typeof sigma)throw new Error("sigma not in scope.");sigma.renderers.canvas.prototype.halo=e,sigma.renderers.webgl.prototype.halo=e}.call(this);
//# sourceMappingURL=sigma.renderers.halo.min.js.map